(()=>{function e(e,t,n,r){var a=new XMLHttpRequest;a.open(e,t,!0),a.setRequestHeader("X-CSRF-TOKEN",document.querySelector('meta[name="csrf-token"]').content),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.addEventListener("load",r),a.send(function(e){return null==e?null:Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")}(n))}function t(){var t=this.closest("li.item");e("post","/api/item/"+t.getAttribute("data-id"),{done:t.querySelector("input[type=checkbox]").checked},i)}function n(){e("delete","/api/item/"+this.closest("li.item").getAttribute("data-id"),null,d)}function r(t){var n=this.closest("article").getAttribute("data-id"),r=this.querySelector("input[name=description]").value;""!=r&&e("put","/api/cards/"+n,{description:r},o),t.preventDefault()}function a(t){e("delete","/api/cards/"+this.closest("article").getAttribute("data-id"),null,l)}function c(t){var n=this.querySelector("input[name=name]").value;""!=n&&e("put","/api/cards/",{name:n},u),t.preventDefault()}function i(){var e=JSON.parse(this.responseText),t=document.querySelector('li.item[data-id="'+e.id+'"]');t.querySelector("input[type=checkbox]");t.checked="true"==e.done}function o(){200!=this.status&&(window.location="/");var e=JSON.parse(this.responseText),r=function(e){var r=document.createElement("li");return r.classList.add("item"),r.setAttribute("data-id",e.id),r.innerHTML='\n  <label>\n    <input type="checkbox"> <span>'.concat(e.description,'</span><a href="#" class="delete">&#10761;</a>\n  </label>\n  '),r.querySelector("input").addEventListener("change",t),r.querySelector("a.delete").addEventListener("click",n),r}(e),a=document.querySelector('article.card[data-id="'+e.card_id+'"]').querySelector("form.new_item");a.previousElementSibling.append(r),a.querySelector("[type=text]").value=""}function d(){200!=this.status&&(window.location="/");var e=JSON.parse(this.responseText);document.querySelector('li.item[data-id="'+e.id+'"]').remove()}function l(){200!=this.status&&(window.location="/");var e=JSON.parse(this.responseText);document.querySelector('article.card[data-id="'+e.id+'"]').remove()}function u(){200!=this.status&&(window.location="/");var e=function(e){var t=document.createElement("article");t.classList.add("card"),t.setAttribute("data-id",e.id),t.innerHTML='\n\n  <header>\n    <h2><a href="cards/'.concat(e.id,'">').concat(e.name,'</a></h2>\n    <a href="#" class="delete">&#10761;</a>\n  </header>\n  <ul></ul>\n  <form class="new_item">\n    <input name="description" type="text">\n  </form>');var n=t.querySelector("form.new_item");n.addEventListener("submit",r);var c=t.querySelector("header a.delete");return c.addEventListener("click",a),t}(JSON.parse(this.responseText)),t=document.querySelector("article.card form.new_card");t.querySelector("[type=text]").value="";var n=t.parentElement;n.parentElement.insertBefore(e,n),e.querySelector("[type=text]").focus()}!function(){var e=document.querySelectorAll("article.card li.item input[type=checkbox]");[].forEach.call(e,(function(e){e.addEventListener("change",t)}));var i=document.querySelectorAll("article.card form.new_item");[].forEach.call(i,(function(e){e.addEventListener("submit",r)}));var o=document.querySelectorAll("article.card li a.delete");[].forEach.call(o,(function(e){e.addEventListener("click",n)}));var d=document.querySelectorAll("article.card header a.delete");[].forEach.call(d,(function(e){e.addEventListener("click",a)}));var l=document.querySelector("article.card form.new_card");null!=l&&l.addEventListener("submit",c)}()})();